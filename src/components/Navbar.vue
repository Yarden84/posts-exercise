<script setup>
import { ref } from 'vue'
import SearchPosts from './SearchPosts.vue'
import SortPosts from './SortPosts.vue'

const props = defineProps({
  sortBy: {
    type: String,
    default: 'id'
  },
  sortOrder: {
    type: String,
    default: 'desc'
  }
})

const emit = defineEmits(['search', 'sort-change'])

const isMobileMenuOpen = ref(false)

const handleSearch = (query) => {
  emit('search', query)
}

const handleSortChange = (sortConfig) => {
  emit('sort-change', sortConfig)
}

const toggleMobileMenu = () => {
  isMobileMenuOpen.value = !isMobileMenuOpen.value
  document.body.style.overflow = isMobileMenuOpen.value ? 'hidden' : ''
}

const closeMobileMenu = () => {
  isMobileMenuOpen.value = false
  document.body.style.overflow = ''
}
</script>

<template>
  <nav class="navbar">
    <div class="navbar-container">
      <svg viewBox="0 0 140 32" class="navbar-logo" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.7225 12.508C18.0693 12.1122 17.577 11.7693 17.1797 11.4773C17.9441 12.1551 18.2027 13.121 18.7168 14.0903C19.1563 14.919 19.851 15.6955 20.0548 16.7061C22.1595 15.6541 23.6815 16.3387 24.6189 16.9339C24.9425 16.1546 25.204 15.4158 25.5964 14.6993C26.3594 13.305 27.3227 12.1144 28.5891 11.2222C28.2277 11.4651 27.8508 11.745 27.4647 12.068C25.0084 14.1223 20.0854 13.3337 18.7225 12.508Z" fill="url(#paint0_linear_938_3031)"/>
        <path d="M20.061 16.7033C19.857 15.6927 19.5357 14.7734 19.0962 13.9447C18.5814 12.9754 17.9414 12.1519 17.1771 11.4739C16.656 11.0904 16.2987 10.7932 15.9529 10.5753C15.8769 10.5297 15.8002 10.4853 15.7222 10.4418C15.711 10.4361 15.7005 10.4296 15.6892 10.4232C14.2364 9.61814 12.5986 9.21602 10.7766 9.21602C9.45532 9.21602 8.21407 9.45106 7.05167 9.92036C5.88941 10.3896 4.88591 11.054 4.04129 11.9118V2.05217C4.04129 1.43507 3.85564 0.939379 3.48654 0.562862C3.11587 0.187929 2.62789 0 2.02039 0C1.43951 0 0.957121 0.187929 0.574507 0.562862C0.191372 0.939379 0 1.43507 0 2.05217V29.669C0 30.2595 0.191372 30.7489 0.574507 31.1374C0.957121 31.5267 1.43951 31.721 2.02039 31.721C2.62789 31.721 3.11587 31.5267 3.48654 31.1374C3.85564 30.7489 4.04129 30.2595 4.04129 29.669V18.0699C4.04129 17.1041 4.29867 16.2319 4.81341 15.4533C5.32893 14.6762 6.04193 14.059 6.95332 13.6026C7.86458 13.1468 8.87445 12.9182 9.9841 12.9182C11.8855 12.9182 13.4107 13.4754 14.5598 14.5883C15.7089 15.7026 16.2834 17.3455 16.2834 19.5184V29.669C16.2834 30.2595 16.4746 30.7489 16.8579 31.1374C17.2404 31.5267 17.7228 31.721 18.3037 31.721C18.8845 31.721 19.3669 31.5267 19.7502 31.1374C20.1327 30.7489 20.3247 30.2595 20.3247 29.669V19.5184C20.3247 18.5127 20.2367 17.5741 20.061 16.7033Z" fill="#193631"/>
        <path d="M51.4138 12.6175C49.7514 13.5348 46.2593 13.8441 44.0104 12.7326C43.2862 12.3755 42.6934 12.0354 42.1836 11.724C43.1462 12.5311 42.4219 13.9528 43.0569 15.098C43.4239 15.7586 45.2216 16.0099 45.4452 16.745C46.9452 16.2205 47.9639 16.0478 49.6171 16.7578C49.833 16.0292 50.6774 15.0964 51.0318 14.4343C51.9431 12.7313 52.657 11.6404 54.2947 10.6876C54.5661 10.5304 54.8418 10.3862 55.1239 10.2554C54.5016 10.504 53.9115 10.8176 53.0754 11.444C52.3891 11.9576 52.2582 12.1518 51.4138 12.6175Z" fill="url(#paint1_linear_938_3031)"/>
        <path d="M41.2124 24.3312C40.6181 25.4718 39.7863 26.3633 38.716 27.0077C37.6463 27.6512 36.4384 27.9733 35.091 27.9733C33.7437 27.9733 32.5356 27.6512 31.4659 27.0077C30.3964 26.3633 29.5575 25.4718 28.9499 24.3312C28.3424 23.1911 28.0386 21.896 28.0386 20.4475C28.0386 18.9988 28.3424 17.6973 28.9499 16.5437C29.5575 15.3902 30.3964 14.4916 31.4659 13.8472C32.5356 13.2037 33.7437 12.8815 35.091 12.8815C36.4384 12.8815 37.6463 13.2037 38.716 13.8472C39.7863 14.4916 40.6181 15.3902 41.2124 16.5437C41.8065 17.6973 42.104 18.9988 42.104 20.4475C42.104 21.896 41.8065 23.1911 41.2124 24.3312ZM45.4639 16.7453C45.2409 16.0108 44.9463 15.313 44.5799 14.6522C43.9442 13.5072 43.1455 12.5314 42.182 11.725C41.7243 11.3407 41.2292 10.9956 40.6976 10.6879C39.0457 9.73636 37.1773 9.25928 35.091 9.25928C32.9778 9.25928 31.089 9.73636 29.4253 10.6879C29.1341 10.855 28.8543 11.0329 28.5857 11.2221C27.3199 12.1144 26.3053 13.2579 25.5429 14.6522C25.1505 15.3695 24.8418 16.1301 24.6162 16.9339C24.3096 18.0245 24.1562 19.196 24.1562 20.4475C24.1562 22.5947 24.6182 24.5118 25.5429 26.2027C26.467 27.8927 27.7615 29.2148 29.4253 30.1663C31.089 31.1192 32.9778 31.5949 35.091 31.5949C37.2041 31.5949 39.0859 31.1192 40.737 30.1663C42.3874 29.2148 43.6749 27.8927 44.5997 26.2027C45.5237 24.5118 45.9863 22.5947 45.9863 20.4475C45.9863 19.1238 45.8119 17.8895 45.4639 16.7453Z" fill="#193631"/>
        <path d="M66.9216 12.1121C66.84 12.0437 66.7548 11.9721 66.6671 11.898C66.9912 12.2 67.0839 12.5776 67.3854 12.932C67.6493 13.2277 67.6761 13.51 67.6761 13.9115C67.6761 14.5022 67.2951 14.7084 66.7149 15.1112C66.4505 15.2991 66.5637 15.6988 66.2206 15.6988C66.0749 15.6988 65.9358 15.6823 65.8008 15.6552C66.032 15.7159 66.3125 15.7252 66.6939 15.6638C67.3407 15.5602 70.0157 15.7423 71.5572 17.0209C71.7849 16.1844 72.3344 15.3098 72.7415 14.5669C73.3688 13.4198 73.9333 12.5287 74.9016 11.7222C74.8777 11.74 74.8544 11.7571 74.832 11.7757C70.9693 14.8437 67.8963 12.9236 66.9216 12.1121Z" fill="url(#paint2_linear_938_3031)"/>
        <path d="M66.8944 26.3633C66.5772 26.1219 66.234 26.0011 65.8641 26.0011C65.3887 26.0011 64.9001 26.1891 64.3986 26.5648C63.289 27.504 61.8362 27.9733 60.0402 27.9733C58.6661 27.9733 57.4448 27.6512 56.3759 27.0069C55.3063 26.3633 54.4738 25.4711 53.8795 24.3312C53.2846 23.1911 52.9879 21.896 52.9879 20.4475C52.9879 18.1674 53.6215 16.3359 54.89 14.9537C56.1571 13.5723 57.8083 12.8815 59.8419 12.8815C60.8454 12.8815 61.7371 13.0494 62.5162 13.3843C62.5774 13.4107 62.6378 13.4387 62.6983 13.4672C63.4078 13.8051 64.0668 14.3066 64.6757 14.9745C64.9972 15.3416 65.3726 15.5673 65.8016 15.6552C65.9358 15.6822 66.0751 15.6979 66.2206 15.6979C66.5639 15.6979 66.8675 15.6044 67.132 15.4166C67.7129 15.0145 68.004 14.518 68.004 13.9273C68.004 13.525 67.8711 13.1773 67.6074 12.8815C67.3049 12.5272 66.9913 12.2 66.6665 11.8979C64.7763 10.1393 62.5014 9.25928 59.8419 9.25928C58.1219 9.25928 56.5503 9.59211 55.1249 10.2557C54.8422 10.3865 54.5659 10.5307 54.2951 10.6879C52.6574 11.6407 51.3831 12.9686 50.4718 14.6723C50.1181 15.3344 49.8333 16.0295 49.6167 16.7582C49.2763 17.9052 49.1055 19.1345 49.1055 20.4475C49.1055 22.5396 49.5738 24.4383 50.5119 26.142C51.4492 27.8462 52.7501 29.1806 54.4139 30.1463C56.0784 31.112 57.9538 31.5949 60.0402 31.5949C62.8931 31.5949 65.27 30.6963 67.172 28.8991C67.4885 28.577 67.6467 28.2148 67.6467 27.8119C67.6467 27.2755 67.3956 26.7934 66.8944 26.3633Z" fill="#193631"/>
        <path d="M98.4833 12.5816C96.8209 13.4988 93.3288 13.8081 91.0792 12.6967C89.8845 12.1066 89.0442 11.563 88.3516 11.1216C89.6778 12.0281 90.0157 13.4175 90.8187 14.8654C91.1845 15.5261 92.1802 16.0103 92.4038 16.7446C92.4192 16.7398 92.4611 16.7346 92.4772 16.7289C93.9835 16.1967 94.9785 16.0081 96.6029 16.686C96.816 15.9838 97.3132 15.4062 97.6556 14.7655C98.567 13.0626 100.883 10.9185 100.145 11.4707C99.4588 11.9843 99.3277 12.1152 98.4833 12.5816Z" fill="url(#paint3_linear_938_3031)"/>
        <path d="M113.883 12.0757C113.775 11.9857 113.637 11.8779 113.48 11.76C113.859 12.1 113.108 12.4838 113.456 12.8924C113.72 13.1881 113.871 13.517 113.871 13.9185C113.871 14.5092 114.624 14.9903 114.043 15.3932C113.916 15.4833 113.827 15.5759 113.682 15.6224C114.385 15.5294 117.015 15.7273 118.53 16.9938C118.756 16.1681 119.225 15.4343 119.627 14.6992C120.435 13.2214 121.373 11.9786 122.747 11.0649C122.475 11.2265 122.16 11.4479 121.793 11.7393C117.93 14.8073 114.857 12.8866 113.883 12.0757Z" fill="url(#paint4_linear_938_3031)"/>
        <path d="M88.1792 24.3312C87.585 25.4718 86.7531 26.3633 85.6828 27.0077C84.6132 27.6512 83.4052 27.9733 82.0578 27.9733C80.7105 27.9733 79.5024 27.6512 78.4327 27.0077C77.3632 26.3633 76.5243 25.4718 75.9175 24.3312C75.3092 23.1911 75.0061 21.896 75.0061 20.4475C75.0061 18.9988 75.3092 17.6973 75.9175 16.5437C76.5243 15.3902 77.3632 14.4916 78.4327 13.8472C79.5024 13.2037 80.7105 12.8815 82.0578 12.8815C83.4052 12.8815 84.6132 13.2037 85.6828 13.8472C86.7531 14.4916 87.585 15.3902 88.1792 16.5437C88.7733 17.6973 89.0709 18.9988 89.0709 20.4475C89.0709 21.896 88.7733 23.1911 88.1792 24.3312ZM92.4307 16.7445C92.2078 16.0108 91.9131 15.313 91.5467 14.6522C90.7437 13.2043 89.6784 12.0279 88.3528 11.1214C87.9682 10.8765 87.6293 10.6621 87.3016 10.4893C87.2798 10.4771 87.2573 10.4656 87.2355 10.4543C85.6912 9.65849 83.9655 9.25928 82.0578 9.25928C79.9446 9.25928 78.0566 9.73636 76.3921 10.6879C75.8577 10.9943 75.3605 11.3393 74.9027 11.7215C73.9344 12.5286 73.1369 13.5051 72.5097 14.6522C72.1033 15.3951 71.7862 16.1852 71.5583 17.0218C71.2686 18.0873 71.123 19.2295 71.123 20.4475C71.123 22.5947 71.585 24.5118 72.5097 26.2027C73.4338 27.8927 74.7283 29.2148 76.3921 30.1663C78.0566 31.1192 79.9446 31.5949 82.0578 31.5949C84.1709 31.5949 86.0527 31.1192 87.7038 30.1663C89.3542 29.2148 90.6417 27.8927 91.5665 26.2027C92.4905 24.5118 92.9531 22.5947 92.9531 20.4475C92.9531 19.1231 92.7788 17.8895 92.4307 16.7445Z" fill="#193631"/>
        <path d="M113.859 26.3633C113.542 26.1219 113.199 26.0011 112.829 26.0011C112.354 26.0011 111.865 26.1891 111.363 26.5648C110.254 27.504 108.801 27.9733 107.005 27.9733C105.631 27.9733 104.409 27.6512 103.341 27.0069C102.27 26.3633 101.438 25.4711 100.844 24.3312C100.249 23.1911 99.9526 21.896 99.9526 20.4475C99.9526 18.1674 100.586 16.3359 101.854 14.9537C103.122 13.5723 104.773 12.8815 106.807 12.8815C107.81 12.8815 108.702 13.0494 109.481 13.3843C110.051 13.6301 110.59 13.9808 111.097 14.4344C111.274 14.5929 111.447 14.7644 111.617 14.9494L111.669 15.0015C112.138 15.4802 112.675 15.7837 113.654 15.6273C113.666 15.6251 113.677 15.6238 113.688 15.6223C113.833 15.5752 113.97 15.5072 114.097 15.4166C114.678 15.0145 114.968 14.518 114.968 13.9273C114.968 13.525 114.836 13.1773 114.572 12.8815C114.223 12.4729 113.859 12.0993 113.48 11.76C112.799 11.2472 111.774 10.5471 111.489 10.3657C111.383 10.31 111.276 10.2565 111.169 10.205C109.852 9.57495 108.399 9.25928 106.807 9.25928C105.04 9.25928 103.429 9.60993 101.974 10.31C101.732 10.4264 101.494 10.5521 101.26 10.6879C99.6221 11.6407 98.3479 12.9686 97.4365 14.6723C97.0949 15.3123 96.8163 15.9837 96.6026 16.6859C96.2475 17.8538 96.0703 19.1074 96.0703 20.4475C96.0703 22.5396 96.5385 24.4383 97.4767 26.142C98.4141 27.8462 99.715 29.1806 101.379 30.1463C103.043 31.112 104.918 31.5949 107.005 31.5949C109.857 31.5949 112.235 30.6963 114.136 28.8991C114.453 28.577 114.612 28.2148 114.612 27.8119C114.612 27.2755 114.36 26.7934 113.859 26.3633Z" fill="#193631"/>
        <path d="M135.141 24.3312C134.547 25.4718 133.715 26.3633 132.646 27.0077C131.576 27.6512 130.367 27.9733 129.02 27.9733C127.673 27.9733 126.465 27.6512 125.395 27.0077C124.325 26.3633 123.487 25.4718 122.88 24.3312C122.271 23.1911 121.968 21.896 121.968 20.4475C121.968 18.9988 122.271 17.6973 122.88 16.5437C123.487 15.3902 124.325 14.4916 125.395 13.8472C126.465 13.2037 127.673 12.8815 129.02 12.8815C130.367 12.8815 131.576 13.2037 132.646 13.8472C133.715 14.4916 134.547 15.3902 135.141 16.5437C135.736 17.6973 136.033 18.9988 136.033 20.4475C136.033 21.896 135.736 23.1911 135.141 24.3312ZM138.509 14.6522C137.572 12.9615 136.277 11.6407 134.627 10.6879C132.976 9.73636 131.106 9.25928 129.02 9.25928C126.907 9.25928 125.019 9.73636 123.355 10.6879C123.145 10.8078 122.943 10.9336 122.745 11.0649C121.371 11.9786 120.281 13.1744 119.472 14.6522C119.07 15.3873 118.755 16.168 118.528 16.9944C118.234 18.068 118.086 19.2188 118.086 20.4475C118.086 22.5947 118.547 24.5118 119.472 26.2027C120.397 27.8927 121.691 29.2148 123.355 30.1663C125.019 31.1192 126.907 31.5949 129.02 31.5949C131.133 31.5949 133.016 31.1192 134.666 30.1663C136.316 29.2148 137.604 27.8927 138.529 26.2027C139.453 24.5118 139.915 22.5947 139.915 20.4475C139.915 18.2746 139.446 16.3424 138.509 14.6522Z" fill="#193631"/>
        <defs>
        <linearGradient id="paint0_linear_938_3031" x1="20.0423" y1="15.5567" x2="26.3674" y2="15.5567" gradientUnits="userSpaceOnUse">
        <stop stop-color="#193631"/>
        <stop offset="1" stop-color="#0A1614"/>
        </linearGradient>
        <linearGradient id="paint1_linear_938_3031" x1="45.4303" y1="15.1899" x2="52.604" y2="15.1899" gradientUnits="userSpaceOnUse">
        <stop stop-color="#193631"/>
        <stop offset="1" stop-color="#0A1614"/>
        </linearGradient>
        <linearGradient id="paint2_linear_938_3031" x1="68.0842" y1="15.7433" x2="73.1294" y2="15.7433" gradientUnits="userSpaceOnUse">
        <stop stop-color="#193631"/>
        <stop offset="1" stop-color="#0A1614"/>
        </linearGradient>
        <linearGradient id="paint3_linear_938_3031" x1="91.3464" y1="15.3888" x2="97.9635" y2="15.3888" gradientUnits="userSpaceOnUse">
        <stop stop-color="#193631"/>
        <stop offset="1" stop-color="#0A1614"/>
        </linearGradient>
        <linearGradient id="paint4_linear_938_3031" x1="115.716" y1="15.5643" x2="120.919" y2="15.5643" gradientUnits="userSpaceOnUse">
        <stop stop-color="#193631"/>
        <stop offset="1" stop-color="#0A1614"/>
        </linearGradient>
        </defs>
      </svg>

      <div class="navbar-fields">
        <div class="navbar-controls">
          <SearchPosts 
            placeholder="Search posts..."
            @search="handleSearch"
          />
          <SortPosts 
            :sort-by="sortBy"
            :sort-order="sortOrder"
            @sort-change="handleSortChange"
          />
        </div>
        
        <button class="mobile-menu-toggle" @click="toggleMobileMenu">
          <svg viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </button>
      </div>

      <div class="mobile-menu-overlay" :class="{ open: isMobileMenuOpen }" @click="closeMobileMenu">
        <div class="mobile-menu-content" @click.stop>
          <div class="mobile-controls">
            <SearchPosts 
              placeholder="Search posts..."
              @search="handleSearch"
            />
            <SortPosts 
              :sort-by="sortBy"
              :sort-order="sortOrder"
              @sort-change="handleSortChange"
            />
          </div>
        </div>
      </div>
    </div>
  </nav>
</template>

<style lang="scss" scoped>
.navbar {
  position: sticky;
  top: 0;
  background-color: #fff;
  border-bottom: 1px solid #ddd;
  z-index: 1000;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

  .navbar-container {
    width: 100%;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;

    .navbar-logo {
      width: 140px;
      height: auto;
    }

    .navbar-fields {
      display: flex;
      align-items: center;
      gap: 20px;

      .navbar-controls {
        display: flex;
        align-items: center;
        gap: 40px;
      }

      .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: #333;
        cursor: pointer;
        padding: 8px;
        border-radius: 4px;
        transition: background-color 0.2s ease;

        &:hover {
          background-color: #f5f5f5;
        }

        svg {
          width: 24px;
          height: 24px;
        }
      }
    }

    .mobile-menu-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;

      &.open {
        opacity: 1;
        visibility: visible;

        .mobile-menu-content {
          transform: translateY(0);
        }
      }

      .mobile-menu-content {
        position: absolute;
        left: 0;
        right: 0;
        background-color: #fff;
        padding: 20px;
        border-bottom: 1px solid #ddd;
        transform: translateY(-100%);
        transition: transform 0.3s ease;

        .mobile-controls {
          display: flex;
          flex-direction: column;
          gap: 15px;
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .navbar {
    .navbar-container {
      padding: 0 15px;
      height: 60px;

      .navbar-fields {
        .navbar-controls {
          display: none;
        }

        .mobile-menu-toggle {
          display: block;
        }
      }

      .mobile-menu-overlay {
        display: block;

        &.open {
          opacity: 1;
          visibility: visible;
        }
      }
    }
  }
}

@media (max-width: 480px) {
  .navbar {
    .navbar-container {
      padding: 0 10px;

      .mobile-menu-overlay {
        .mobile-menu-content {
          padding: 15px;
        }
      }
    }
  }
}
</style> 